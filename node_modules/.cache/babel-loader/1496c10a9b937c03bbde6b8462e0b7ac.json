{"remainingRequest":"/Users/shangjiawei/Desktop/my all/node/blog_h5/node_modules/thread-loader/dist/cjs.js!/Users/shangjiawei/Desktop/my all/node/blog_h5/node_modules/babel-loader/lib/index.js!/Users/shangjiawei/Desktop/my all/node/blog_h5/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/shangjiawei/Desktop/my all/node/blog_h5/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shangjiawei/Desktop/my all/node/blog_h5/src/pages/edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shangjiawei/Desktop/my all/node/blog_h5/src/pages/edit.vue","mtime":1560513608014},{"path":"/Users/shangjiawei/Desktop/my all/node/blog_h5/node_modules/cache-loader/dist/cjs.js","mtime":1557892098038},{"path":"/Users/shangjiawei/Desktop/my all/node/blog_h5/node_modules/thread-loader/dist/cjs.js","mtime":1557892098371},{"path":"/Users/shangjiawei/Desktop/my all/node/blog_h5/node_modules/babel-loader/lib/index.js","mtime":1557892095867},{"path":"/Users/shangjiawei/Desktop/my all/node/blog_h5/node_modules/cache-loader/dist/cjs.js","mtime":1557892098038},{"path":"/Users/shangjiawei/Desktop/my all/node/blog_h5/node_modules/vue-loader/lib/index.js","mtime":1557892098561}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/shangjiawei/Desktop/my all/node/blog_h5/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/shangjiawei/Desktop/my all/node/blog_h5/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { updateBlogList, detailBlogList } from \"./../service/getData\";\nexport default {\n  name: \"editblog\",\n  data: function data() {\n    return _defineProperty({\n      content: \"\",\n      title: \"\",\n      id: \"\",\n      imageUrl: \"\",\n      dialogVisible: false\n    }, \"imageUrl\", \"\");\n  },\n  mounted: function () {\n    var _mounted = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee() {\n      var id, data;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              id = window.location.hash.split(\"?\")[1].split(\"=\")[1];\n              _context.next = 3;\n              return detailBlogList(id);\n\n            case 3:\n              data = _context.sent;\n              this.title = data.data.title;\n              this.content = data.data.content;\n              this.id = id;\n              this.author = data.data.author;\n              this.imageUrl = data.data.image;\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function mounted() {\n      return _mounted.apply(this, arguments);\n    }\n\n    return mounted;\n  }(),\n  methods: {\n    updatBlog: function () {\n      var _updatBlog = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var result;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return updateBlogList(this.id, this.title, this.content, this.author, this.imageUrl);\n\n              case 2:\n                result = _context2.sent;\n\n                if (result.code === 200) {\n                  this.$message({\n                    type: \"success\",\n                    message: \"更新成功\"\n                  });\n                  this.$router.push(\"/admin\");\n                } else {\n                  this.$message({\n                    type: \"error\",\n                    message: \"更新失败\"\n                  });\n                }\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function updatBlog() {\n        return _updatBlog.apply(this, arguments);\n      }\n\n      return updatBlog;\n    }(),\n    handleRemove: function handleRemove(file, fileList) {\n      //移除图片\n      console.log(file, fileList);\n    },\n    handlePictureCardPreview: function handlePictureCardPreview(file) {\n      //预览图片时调用\n      this.imageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    handleAvatarSuccess: function handleAvatarSuccess(res, file, fileList) {\n      //图片上传成功\n      // this.imageUrl = URL.createObjectURL(file.raw);\n      console.log(file, \"file++++\");\n      this.imageUrl = file.response.filename; // this.fileName = file.response.data.fileName;\n      // console.log(this.imageUrl, \"this.imageUrl\");\n      // this.contractOss.push(this.imageUrl);\n\n      this.$message.success(\"图片上传成功\");\n    },\n    handleExceed: function handleExceed(files, fileList) {\n      //图片上传超过数量限制\n      this.$message.error(\"上传图片不能超过45张!\");\n      console.log(file, fileList);\n    },\n    imgUploadError: function imgUploadError(err, file, fileList) {\n      //图片上传失败调用\n      console.log(err);\n      this.$message.error(\"上传图片失败!\");\n    },\n    //      上传照片前的校验\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var testmsg = /^image\\/(jpeg|png|jpg)$/.test(file.type);\n      var isLt4M = file.size / 1024 / 1024 <= 4; //图片大小不超过2MB\n\n      if (!testmsg) {\n        this.$message({\n          message: \"上传图片格式不对!\",\n          type: \"error\",\n          center: true\n        });\n        return;\n      }\n\n      if (!isLt4M) {\n        this.$message({\n          message: \"上传图片大小不能超过 4M!\",\n          type: \"error\",\n          center: true\n        });\n        return;\n      }\n\n      return testmsg && isLt4M;\n    }\n  }\n};",{"version":3,"sources":["edit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"editblog\">\n    <div class=\"title\" style=\"font-size: .5rem ; \">编辑博客</div>\n    <div class=\"content-input\">\n      <span class=\"t_lab\">标题:</span>\n      <el-input style=\"width:5.5rem;\" v-model=\"title\" placeholder=\"输入标题\" prefix-icon=\"search\"></el-input>\n    </div>\n    <div class=\"content-input\">\n      <span class=\"t_lab\">内容:</span>\n      <el-input\n        type=\"textarea\"\n        :autosize=\"{ minRows: 6, maxRows: 10}\"\n        placeholder=\"请输入内容\"\n        style=\"width:5.5rem;\"\n        v-model=\"content\"\n      ></el-input>\n    </div>\n\n    <el-form class=\"img\">\n      <el-form-item label=\"封面图片\" class=\"upload\">\n        <el-upload\n          action=\"/api/blog/uploadfile\"\n          list-type=\"picture-card\"\n          accept=\"image/*\"\n          :limit=\"45\"\n          :multiple=\"true\"\n          :on-preview=\"handlePictureCardPreview\"\n          :on-success=\"handleAvatarSuccess\"\n          :on-exceed=\"handleExceed\"\n          :before-upload=\"beforeAvatarUpload\"\n          :on-error=\"imgUploadError\"\n          :on-remove=\"handleRemove\"\n          :show-file-list=\"false\"\n        >\n          <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\" style=\"width:100%;height:100%\">\n          <i  v-else class=\"el-icon-plus\"></i>\n        </el-upload>\n\n        <!-- <el-dialog :visible.sync=\"dialogVisible\">\n          <img width=\"100%\" :src=\"imageUrl\" alt>\n        </el-dialog> -->\n      </el-form-item>\n    </el-form>\n\n    <el-button @click=\"updatBlog\" class=\"button_sub\">更新</el-button>\n  </div>\n</template>\n\n<script>\nimport { updateBlogList, detailBlogList } from \"./../service/getData\";\n\nexport default {\n  name: \"editblog\",\n  data() {\n    return {\n      content: \"\",\n      title: \"\",\n      id: \"\",\n      imageUrl: \"\",\n      dialogVisible: false,\n      // contractOss:[],\n      imageUrl: \"\"\n    };\n  },\n  async mounted() {\n    let id = window.location.hash.split(\"?\")[1].split(\"=\")[1];\n    const data = await detailBlogList(id);\n    this.title = data.data.title;\n    this.content = data.data.content;\n    this.id = id;\n    this.author = data.data.author;\n     this.imageUrl = data.data.image;\n  },\n  methods: {\n    async updatBlog() {\n      const result = await updateBlogList(\n        this.id,\n        this.title,\n        this.content,\n        this.author,\n        this.imageUrl\n      );\n      if (result.code === 200) {\n        this.$message({\n          type: \"success\",\n          message: \"更新成功\"\n        });\n        this.$router.push(\"/admin\");\n      } else {\n        this.$message({\n          type: \"error\",\n          message: \"更新失败\"\n        });\n      }\n    },\n    handleRemove(file, fileList) {\n      //移除图片\n      console.log(file, fileList);\n    },\n    handlePictureCardPreview(file) {\n      //预览图片时调用\n      this.imageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    handleAvatarSuccess(res, file, fileList) {\n      //图片上传成功\n      // this.imageUrl = URL.createObjectURL(file.raw);\n      console.log(file, \"file++++\");\n      this.imageUrl = file.response.filename;\n      // this.fileName = file.response.data.fileName;\n      // console.log(this.imageUrl, \"this.imageUrl\");\n      // this.contractOss.push(this.imageUrl);\n      this.$message.success(\"图片上传成功\");\n    },\n    handleExceed(files, fileList) {\n      //图片上传超过数量限制\n      this.$message.error(\"上传图片不能超过45张!\");\n      console.log(file, fileList);\n    },\n    imgUploadError(err, file, fileList) {\n      //图片上传失败调用\n      console.log(err);\n      this.$message.error(\"上传图片失败!\");\n    },\n    //      上传照片前的校验\n    beforeAvatarUpload(file) {\n      var testmsg = /^image\\/(jpeg|png|jpg)$/.test(file.type);\n      const isLt4M = file.size / 1024 / 1024 <= 4; //图片大小不超过2MB\n      if (!testmsg) {\n        this.$message({\n          message: \"上传图片格式不对!\",\n          type: \"error\",\n          center: true\n        });\n        return;\n      }\n      if (!isLt4M) {\n        this.$message({\n          message: \"上传图片大小不能超过 4M!\",\n          type: \"error\",\n          center: true\n        });\n        return;\n      }\n      return testmsg && isLt4M;\n    }\n  }\n};\n</script>\n<style scoped>\n.content-input {\n  display: flex;\n  -ms-flex-wrap: wrap;\n  flex-wrap: wrap;\n  font-size: 0.4rem;\n  width: 100%;\n  margin: 0.2rem;\n  margin-top: 0.4rem;\n  position: relative;\n  top: 1.5rem;\n}\n.t_lab {\n  margin-right: 0.2rem;\n  font-size: 0.24rem;\n}\n\n.button_sub {\n  position: relative;\n  top: 1.2rem;\n  text-align: center;\n  left: 50%;\n  margin-left: -0.7rem;\n  width: 1.4rem;\n}\n\n\n\n.avatar-uploader .el-upload {\n    border: 0.02rem dashed #d9d9d9;\n    border-radius: 0.06rem;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n}\n\n.avatar-uploader .el-upload:hover {\n    border-color: #409eff;\n}\n\n.el-upload-list__item {\n    overflow: hidden;\n    background-color: #fff;\n    border: 1px solid #c0ccda;\n    border-radius: 6px;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    margin: 0 8px 8px 0;\n    display: inline-block;\n    width: 1.7rem !important;\n    height: 1.7rem !important;\n}\n\n.el-upload__input {\n    display: none !important;\n}\n\n.el-upload-list__item-delete {\n    position: static;\n    /* font-size: inherit; */\n    color: inherit;\n    font-size: 0.25rem !important;\n}\n\n.el-upload--text {\n    speak: none;\n    font-style: normal;\n    font-weight: 400;\n    font-variant: normal;\n    text-transform: none;\n    line-height: 1.7rem;\n    vertical-align: baseline;\n    display: inline-block;\n    -webkit-font-smoothing: antialiased;\n}\n\n.avatar {\n    width: 0.17rem;\n    height: 0.17rem;\n    display: block;\n}\n\n.img {\n    position: relative;\n    top: 1.6rem;\n}\n</style>"],"sourceRoot":"src/pages"}]}